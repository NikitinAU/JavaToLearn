>Что такое тачпойнты?
>Какие стратегии знаете/использовали в проекте?

What is CI
https://habr.com/ru/post/508216/


Что такое CI/CD/D
https://habr.com/ru/company/otus/blog/515078/


## Контейнеризация
### Что такое контейнеризация?

Контейнеризация – это процесс развертывания программного обеспечения, который объединяет код приложения со всеми файлами и библиотеками, необходимыми для запуска в любой инфраструктуре. Обычно для запуска какого-либо приложения на компьютере требовалось установить версию, соответствующую операционной системе ПК. Например, вам нужно было установить версию пакета программного обеспечения для Windows на компьютере под управлением Windows. Однако с помощью контейнеризации можно создать единый программный пакет или [контейнер](https://aws.amazon.com/containers), который будет работать на всех типах устройств и операционных систем. 

### В чем преимущества контейнеризации?

Разработчики используют контейнеризацию для создания и развертывания современных приложений из-за указанных ниже преимуществ. 

#### **Портативность**

Разработчики программного обеспечения используют контейнеризацию для развертывания приложений в нескольких средах без переписывания программного кода. Они создают приложение один раз и развертывают его в нескольких операционных системах. Например, они запускают одни и те же контейнеры в операционных системах Linux и Windows. Разработчики также обновляют устаревший код приложения до современных версий, используя контейнеры для развертывания.

#### **Возможность масштабирования**

Контейнеры – это легкие программные компоненты, которые эффективно работают. Например, виртуальная машина может быстрее запускать контейнерное приложение, поскольку ей не нужно загружать операционную систему. Поэтому разработчики программного обеспечения могут легко добавить несколько контейнеров для разных приложений на одном компьютере. Кластер контейнеров использует вычислительные ресурсы одной и той же общей операционной системы, но один контейнер не мешает работе других контейнеров.  

#### **Отказоустойчивость**

Команды разработчиков программного обеспечения используют контейнеры для создания отказоустойчивых приложений. Они используют несколько контейнеров для запуска микросервисов в облаке. Поскольку контейнерные микросервисы работают в изолированных пользовательских пространствах, один неисправный контейнер не влияет на другие контейнеры. Это повышает устойчивость и доступность приложения.

#### **Гибкость**

Контейнерные приложения работают в изолированных вычислительных средах. Разработчики программного обеспечения могут устранять неполадки и изменять код приложения без вмешательства в операционную систему, оборудование или другие сервисы приложений. Они могут сократить циклы выпуска программного обеспечения и быстро работать над обновлениями с моделью контейнера.

### Каковы сценарии использования контейнеризации?

Ниже приведены примеры использования контейнеризации.

#### **Миграция в облако**

Миграция в облако, или _перенос_, – это программная стратегия, которая включает инкапсуляцию устаревших приложений в контейнеры и развертывание их в среде облачных вычислений. Организации могут модернизировать свои приложения без переписывания всего программного кода.

#### **Внедрение микросервисной архитектуры**

Организации, стремящиеся создавать облачные приложения с микросервисами, нуждаются в технологии контейнеризации. Архитектура микросервисов – это подход к разработке программного обеспечения, который использует несколько взаимозависимых программных компонентов для предоставления функционального приложения. Каждый микросервис имеет уникальную и специфическую функцию. Современное облачное приложение состоит из нескольких микросервисов. Например, приложение потокового видео может иметь микросервисы для обработки данных, отслеживания пользователей, выставления счетов и персонализации. Контейнеризация предоставляет программный инструмент для упаковки микросервисов в виде развертываемых программ на разных платформах.

#### **Устройства IoT**

Устройства Интернета вещей (IoT) содержат ограниченные вычислительные ресурсы, что делает обновление программного обеспечения вручную сложным процессом. Контейнеризация позволяет разработчикам легко развертывать и обновлять приложения на устройствах Интернета вещей.

### Как работает контейнеризация?

Контейнеризация предполагает создание самодостаточных пакетов программного обеспечения, которые работают стабильно, независимо от компьютеров, на которых они работают. Разработчики программного обеспечения создают и развертывают образы контейнеров, то есть файлы, содержащие необходимую информацию для запуска контейнерного приложения. Разработчики используют инструменты контейнеризации для создания образов контейнеров на основе спецификации образов Open Container Initiative (OCI). OCI – это группа с открытым исходным кодом, которая предоставляет стандартизированный формат для создания образов контейнеров. Образы контейнеров доступны только для чтения и не могут быть изменены компьютерной системой.

Образы контейнеров – это верхний слой в контейнерной системе, состоящей из следующих слоев.

#### **Инфраструктура**

Инфраструктура – это аппаратный уровень модели контейнеров. Это относится к физическому компьютеру или серверу без установленной операционной системы, на котором выполняется контейнерное приложение. 

#### **ОС**

Второй уровень архитектуры контейнеризации – операционная система. Linux – популярная операционная система для контейнеризации с локальными компьютерами. В облачных вычислениях разработчики используют облачные сервисы, такие как [AWS EC2](https://aws.amazon.com/ecs/), для запуска контейнерных приложений. 

#### **Контейнерный движок**

Движок контейнеров, или среда выполнения контейнера, – это программное обеспечение, которое создает контейнеры на основе образов контейнеров. Он выступает в качестве посредника между контейнерами и операционной системой, предоставляя ресурсы, необходимые приложению, и управляя ими. Например, контейнерные движки могут управлять несколькими контейнерами в одной операционной системе, сохраняя их независимость от базовой инфраструктуры и друг от друга. 

#### **Приложение и зависимости**

Самый верхний уровень архитектуры контейнеризации – это код приложения и другие файлы, которые необходимо запустить, такие как зависимости библиотек и связанные с ними файлы конфигурации. Этот слой также может содержать легкую гостевую операционную систему, которая устанавливается поверх основной.

![](https://d1.awsstatic.com/product-page-diagram_Amazon-ECS%402x.0d872eb6fb782ddc733a27d2bb9db795fed71185%20(2).0033d27bf1c708546c00befa892639c61a483269.png)

### Что такое оркестрация контейнеров?

Оркестрация контейнеров – это программная технология, позволяющая автоматически управлять контейнерами. Это необходимо для разработки современных облачных приложений, поскольку приложение может содержать тысячи микросервисов в соответствующих контейнерах. Большое количество контейнерных микросервисов не позволяет разработчикам программного обеспечения управлять ими вручную.

#### **Преимущества оркестрации контейнеров**

Разработчики используют инструменты оркестрации контейнеров для автоматического запуска и остановки контейнеров, а также управления ими. Оркестраторы контейнеров позволяют разработчикам точно масштабировать облачные приложения и избегать человеческих ошибок. Например, можно убедиться, что контейнеры развернуты с достаточными ресурсами хост-платформы. 

### Какие существуют виды контейнерной технологии?

Ниже приведены примеры популярных технологий, которые разработчики используют для контейнеризации.

#### **Docker**

Docker, или Docker Engine, – это популярная среда выполнения контейнеров с открытым исходным кодом, которая позволяет разработчикам программного обеспечения создавать, развертывать и тестировать контейнерные приложения на различных платформах. Контейнеры Docker – это автономные пакеты приложений и связанных файлов, созданных с помощью платформы Docker.

#### **Linux**

Linux – операционная система с открытым исходным кодом и встроенной контейнерной технологией. Контейнеры Linux – это автономные среды, позволяющие запускать несколько приложений на базе Linux на одном хост-компьютере. Разработчики программного обеспечения используют контейнеры Linux для развертывания приложений, которые записывают или считывают большие объемы данных. Контейнеры Linux не копируют всю операционную систему в виртуализированную среду. Вместо этого контейнеры состоят из необходимых функций, выделенных в пространстве имен Linux.  

#### **Система Kubernetes**

Kubernetes – популярный оркестратор контейнеров с открытым исходным кодом, который разработчики программного обеспечения используют для развертывания, масштабирования огромного количества микросервисов и управления им. Он имеет декларативную модель, которая упрощает автоматизацию контейнеров. Декларативная модель гарантирует, что Kubernetes предпримет соответствующие действия для выполнения требований на основе файлов конфигурации. 

### Что такое виртуальная машина?

Виртуальная машина (ВМ) – это цифровая копия физического оборудования и операционной системы хост-машины. На хост-машине может быть несколько виртуальных машин, совместно использующих ЦП, хранилище и память. Гипервизор, то есть программное обеспечение для мониторинга виртуальных машин, распределяет вычислительные ресурсы между всеми виртуальными машинами независимо от того, используют ли их приложения.

#### **Контейнеризация и виртуальные машины**

Контейнеризация – это аналогичная, но улучшенная концепция виртуальной машины. Вместо копирования аппаратного уровня контейнеризация удаляет уровень операционной системы из автономной среды. Это позволяет приложению работать независимо от операционной системы хоста. Контейнеризация предотвращает растрату ресурсов, поскольку приложения получают именно те ресурсы, в которых они нуждаются. 

### Что такое бессерверные вычисления?

Бессерверные вычисления – это технология облачных вычислений, при которой поставщик облачных услуг полностью управляет серверной инфраструктурой приложения. Это означает, что разработчикам и организациям не нужно настраивать, обслуживать или выделять ресурсы на облачном сервере. Бессерверные вычисления позволяют организациям автоматически масштабировать вычислительные ресурсы в соответствии с рабочей нагрузкой. 

#### **Контейнеризация и бессерверные вычисления**

Бессерверные вычисления позволяют мгновенно развертывать приложения, поскольку в них нет зависимостей, таких как библиотеки или файлы конфигурации. Поставщик облачных технологий не взимает плату за вычислительные ресурсы, когда бессерверное приложение находится в режиме ожидания. Контейнеры, с другой стороны, более портативны, что дает разработчикам полный контроль над средой приложения. 

### Что такое полностью облачная архитектура?

Полностью облачная архитектура – это метод разработки программного обеспечения, в рамках которого создается, тестируется и развертывается приложение в облаке. Термин _полностью облачная архитектура_ означает, что приложение создано и находится в среде облачных вычислений. Организации создают облачные приложения, потому что они обладают высокой масштабируемостью, отказоустойчивостью и гибкостью.

#### **Контейнеризация по сравнению с полностью облачной архитектурой**

Для разработки облачных приложений требуются технологии и подходы, отличные от обычных монолитных приложений. Контейнеризация – одна из технологий, которая позволяет разработчикам создавать облачные приложения. Система работает с другими облачными технологиями, такими как сетка сервисов и API, чтобы микросервисы могли слаженно работать в облачном приложении.


## CI-Server
### Что такое сервер непрерывной интеграции?

Непрерывная интеграция (CI) — это практика DevOps, которая позволяет избежать проблем, возникающих в результате интеграции изменений на заключительных стадиях реализации проекта. Никто не хочет получить кучу конфликтов слияния и ошибок сборки, за которыми следуют многочисленные баги и горькое осознание того, что ваше ПО на самом деле не работает так, как нужно пользователю.

Непрерывная интеграция позволяет вам выполнять отправку, сборку и тестирование нового кода по мере его написания. Частая интеграция по ходу процесса разработки дает возможность минимизировать конфликты, проверять, как взаимодействуют изменения различных участников проекта, и исправлять ошибки, прежде чем они глубоко проникнут в кодовую базу и затронут работу других функций.

[Непрерывная интеграция](https://www.jetbrains.com/ru-ru/teamcity/ci-cd-guide/continuous-integration/) является первой составляющей [CI](https://www.jetbrains.com/ru-ru/teamcity/ci-cd-guide/continuous-delivery/)/[CD](https://www.jetbrains.com/ru-ru/teamcity/ci-cd-guide/continuous-deployment/)-пайплайна — это постоянный процесс отправки, сборки, тестирования, проверки и выпуска каждого изменения, который на каждом этапе дает обратную связь и обеспечивает планомерное движение к нужному результату.

Реализация CI/CD требует особого подхода к культуре труда для налаживания взаимодействия между различными командами и внедрения новых рабочих процессов. Помимо этого, необходимы инструменты для автоматизации различных этапов и обеспечения эффективной работы пайплайна.

Ключевую роль в этом играет сервер непрерывной интеграции (или билд-сервер). Это связующее звено, которое на основе вашей бизнес-логики объединяет все этапы пайплайна и координирует выполнение автоматизированных заданий, а также собирает данные и дает обратную связь. В этой статье мы более подробно рассмотрим, что делает сервер непрерывной интеграции и как он может помочь воспользоваться всеми преимуществами CI/CD.

![](https://www.jetbrains.com/teamcity/ci-cd-guide/img/What_is_a_CI_Server.svg)

![](https://www.jetbrains.com/teamcity/ci-cd-guide/img/network.svg)

### Интеграция с системой контроля версий

Любой [CI/CD-пайплайн](https://www.jetbrains.com/ru-ru/teamcity/ci-cd-guide/ci-cd-pipeline/) начинается с интеграции с [системой контроля версий](https://www.jetbrains.com/ru-ru/teamcity/ci-cd-guide/concepts/version-control/).

В рамках базовой реализации сервер непрерывной интеграции настраивается на отслеживание коммитов, которые попадают в ветку master. В случае наличия изменения происходит запуск пайплайна.

И хотя при этом каждый коммит проверяется и тестируется, остается высокая вероятность, что кто-то отправит код, который сломает сборку, весь процесс прервется и другие изменения не будут проверяться, до тех пор пока проблемный код не будет удален или исправлен.

Настройка сервера непрерывной интеграции для выполнения сборки и тестирования изменений перед их отправкой помогает предотвратить такого рода проблемы и обеспечивает дополнительный цикл обратной связи для каждого разработчика.

Важно отметить, что билд-сервер не только управляет выполнением сборки и тестов на удаленной машине и передает их результаты разработчику, но и делает это условием для отправки изменений в основную или функциональную ветку.

Кроме того, вы можете рассмотреть возможность интеграции сервера непрерывной интеграции с вашим инструментом для код-ревью, чтобы перед отправкой каждый коммит обязательно проходил код-ревью и отправлялся только в случае успешного выполнения сборки и тестирования.

Благодаря реализации этих дополнительных уровней бизнес-логики в начале процесса, поддерживается чистота кодовой базы и обеспечивается ее готовность к выпуску, при этом минимизируются прерывания и задержки в пайплайне.

![](https://www.jetbrains.com/teamcity/ci-cd-guide/img/builtin-dev-tools.svg)

### Управление сборками

Когда дело доходит до запуска сборки и тестирования в рамках CI/CD-пайплайна, ваш CI-сервер становится центральным звеном, координирующим выполнение заданий и распределяющим работу по билд-агентам на основе различных критериев.

Ваши билд-агенты берут на себя работу по запуску сборок и выполнению тестов в соответствии с инструкциями, полученными от сервера непрерывной интеграции.

Рекомендуется отделять сервер непрерывной интеграции от билд-агентов, которые запускают сборки и выполняют тесты, по меньшей мере в продакшн-конфигурации, во избежание возникновения конфликта доступа к ресурсам и проблем с производительностью.

При использовании сервера непрерывной интеграции для организации логики этапа вашего пайплайна есть возможность задать особые условия и правила. Например, можно запускать определенные тесты коммитов в основную ветку, но не во время выполнения предкоммитной сборки на ветке разработки, или, скажем, контролировать количество сборок, которые могут одновременно обращаться к одной базе данных.

Одновременный запуск определенных заданий с использованием разных билд-агентов может повысить эффективность вашего пайплайна. Это полезно, когда необходимо запустить тесты на разных операционных системах или когда вы работаете с огромной кодовой базой, а тесты исчисляются сотнями тысяч, в этом случае единственный рациональный выход — параллельное выполнение. Во втором случае использование [композитной сборки](https://www.jetbrains.com/help/teamcity/composite-build-configuration.html) позволит объединить результаты, чтобы можно было обрабатывать задания за один шаг сборки.

CI-сервер, интегрированный с облачной инфраструктурой, такой как AWS, позволяет воспользоваться преимуществами гибких, масштабируемых ресурсов для выполнения сборок и тестов. Если у вас повышенные требования к инфраструктуре, поддержка контейнерных билд-агентов и интеграция с Kubernetes позволит эффективно распорядиться ресурсами сборки, независимо от их расположения — в облаке или в локальной инфраструктуре.

![](https://www.jetbrains.com/teamcity/ci-cd-guide/img/cross-check.svg)

### Определение неудачного завершения сборки

Важнейшей составляющей вашей бизнес-логики является определение того, что считать неудачным завершением сборки на каждом этапе CI/CD-пайплайна.

CI-сервер позволяет задавать различные [условия неудачного завершения сборки,](https://www.jetbrains.com/help/teamcity/build-failure-conditions.html) которые он затем применит и будет использовать для определения состояния того или иного этапа и принимать решение, можно ли перейти к следующему этапу пайплайна.

Помимо очевидных неудачных завершений сборки (например, когда возвращается код ошибки или не выполняются тесты), можно задать и другие типы неудачных завершений на основе данных, собранных CI-сервером.

Скажем, это может быть уменьшение покрытия кода тестами по сравнению с предыдущей сборкой (а значит, для очередных изменений кода не были добавлены тесты) или увеличение количества проигнорированных тестов по сравнению с последней успешной сборкой.

На основании этих данных можно сделать вывод о возможном снижении качества кода. Задав эти метрики в качества триггера для неудачного завершения сборки и ограничив число пользователей, которым разрешено игнорировать эти сбои, можно добиться нужного сценария выполнения сборки.

![](https://www.jetbrains.com/teamcity/ci-cd-guide/img/settings.svg)

### Использование непрерывной доставки

Хотя название «сервер непрерывной интеграции» подразумевает, что его использование ограничивается лишь непрерывной интеграцией, большинство CI-серверов также поддерживают непрерывную доставку и развертывание.

После формирования артефактов сборки и выполнения исходного набора тестов во время этапа непрерывной интеграции следующим шагом является развертывание этих артефактов в тестовых средах для дальнейшего тестирования. После этого следует проверка рабочей версии всеми заинтересованными сторонами. Если на этом этапе нареканий нет, то за ним следует релиз.

CI-сервер не только обеспечивает [репозиторий артефактов](https://www.jetbrains.com/ru-ru/teamcity/ci-cd-guide/concepts/artifact-repository/) для хранения результатов каждой сборки, чтобы при необходимости их можно было развернуть, но и может хранить и регулировать параметры для каждой среды в пайплайне. В дальнейшем можно указать, должны ли ваши скрипты развертывания автоматически срабатывать в зависимости от результатов, полученных на предыдущем этапе.

![](https://www.jetbrains.com/teamcity/ci-cd-guide/img/message.svg)

### Наблюдение за ходом процесса

Ключевой составляющей CI/CD-пайплайна является быстрая обратная связь по каждому этапу.

Сервер непрерывной интеграции может обеспечивать информацию об очереди заданий, выдавать отчеты о сборках и тестах в режиме реального времени (прямо во время их выполнения), а также отображать состояние выполненных шагов сборки.

Настроив уведомления, вы и ваша команда будете оперативно узнавать о любых событиях, при этом интеграция с баг-трекерами дает возможность видеть исправления, которые содержит коммит, и оперативно выяснять причину неудачного завершения сборки. Из статистических данных можно получить полезные сведения для оптимизации пайплайна, а также определения условий в логике пайплайна.

### Подводя итог

Сервер непрерывной интеграции играет важную роль в работе вашего CI/CD-пайплайна, координируя и запуская различные стадии проекта, а также собирая и передавая данные по каждому этапу. В нашем [Руководстве по инструментам CI/CD](https://www.jetbrains.com/ru-ru/teamcity/ci-cd-guide/ci-cd-tools/) есть рекомендации, как выбрать подходящий сервер непрерывной интеграции.


## Jenkins Alternatives
![[Pasted image 20230105035148.png]]


